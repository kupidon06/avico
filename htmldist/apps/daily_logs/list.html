{% extends "layouts/base.html" %} {% load static %} {% block extrastyle %} <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.tailwindcss.min.css"><style>.fixed-width-aside{width:100%;flex:none}</style> {% endblock extrastyle %} {% block content %} <div class="bg-gray-100 dark:bg-gray-900 p-4"><div class="flex flex-col md:flex-row"> {% include "includes/batch.html" %} <section class="w-full md:w-3/4 md:p-6 flex flex-col rounded-lg"><main class="w-full"><nav class="flex flex-wrap justify-center items-center bg-white dark:bg-gray-800 p-2 border-b border-gray-200 dark:border-gray-700 mb-4 rounded-lg"><a href="{% url 'daily_log_list' batch.id %}" class="border bg-blue-700 border-blue-700 text-white px-4 py-2 m-2 rounded-lg hover:bg-blue-700 hover:text-white transition duration-300 flex items-center justify-center">DailyLog </a><a href="{% url 'feeding_list' batch.id%}" class="border border-green-500 text-green-500 px-4 py-2 m-2 rounded-lg hover:bg-green-500 hover:text-white transition duration-300 flex items-center justify-center">Feeding </a><a href="{% url 'egg_collection_list' batch.id %}" class="border border-red-500 text-red-500 px-4 py-2 m-2 rounded-lg hover:bg-red-500 hover:text-white transition duration-300 flex items-center justify-center">EggCollection </a><a href="{% url 'treatment_history_list' batch.id %}" class="border border-yellow-500 text-yellow-500 px-4 py-2 m-2 rounded-lg hover:bg-yellow-500 hover:text-white transition duration-300 flex items-center justify-center">TreatmentHistory </a><a href="{% url 'batch_allocation_list' batch.id %}" class="border border-purple-500 text-purple-500 px-4 py-2 m-2 rounded-lg hover:bg-purple-500 hover:text-white transition duration-300 flex items-center justify-center">Sales</a></nav><div class="p-4 bg-white dark:bg-gray-800 flex flex-col sm:flex-row items-center sm:flex md:divide-x md:divide-gray-100 dark:divide-gray-700 justify-between border-b border-gray-200 dark:border-gray-700 lg:mt-1.5 rounded-lg"><div class="flex flex-col sm:flex-row items-center justify-between w-full sm:w-auto mb-4 sm:mb-0"><form class="flex flex-wrap items-center w-full sm:w-auto" method="GET" action="{% url 'daily_log_list' batch.id %}"><label for="from_date" class="sr-only px-4 py-2">From Date</label><div class="relative w-full sm:w-auto mt-1 sm:mt-0 sm:mr-2"><input type="date" name="from_date" id="from_date" class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="From Date"></div><label for="to_date" class="sr-only">To Date</label><div class="relative w-full sm:w-auto mt-1 sm:mt-0 sm:mr-2"><input type="date" name="to_date" id="to_date" class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="To Date"></div><button type="submit" class="flex items-center px-4 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-lg m-2 transition duration-300"><svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/></svg> Search</button></form></div><div class="flex flex-wrap justify-center items-center bg-white dark:bg-gray-800 p-4 dark:border-gray-700 mb-4 rounded-lg w-full sm:w-auto"><button id="bulk-delete-drawer" class="flex items-center px-4 py-2 bg-red-600 hover:bg-red-800 text-white rounded-lg m-2 transition duration-300" data-drawer-target="drawer-bulk-delete" data-drawer-show="drawer-bulk-delete" aria-controls="drawer-bulk-delete" data-drawer-placement="right"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Delete</button> <a href="{% url 'daily_log_list_print' batch.id %}?{% if request.GET.from_date or  request.GET.to_date  %}from_date={{ request.GET.from_date }}&to_date={{ request.GET.to_date }}{% endif %}" class="flex items-center px-4 py-2 bg-yellow-700 hover:bg-yellow-800 text-white rounded-lg m-2 transition duration-300"><svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M8 3a2 2 0 0 0-2 2v3h12V5a2 2 0 0 0-2-2H8Zm-3 7a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h1v-4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v4h1a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H5Zm4 11a1 1 0 0 1-1-1v-4h8v4a1 1 0 0 1-1 1H9Z" clip-rule="evenodd"/></svg> Print </a><a href="{% url 'daily_log_list_export' batch.id %}?{% if request.GET.from_date or  request.GET.to_date  %}from_date={{ request.GET.from_date }}&to_date={{ request.GET.to_date }}{% endif %}" class="flex items-center px-4 py-2 bg-green-700 hover:bg-green-800 text-white rounded-lg m-2 transition duration-300"><svg class="w-6 h-6 text-white dark:text-gray-800" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 3v4a1 1 0 0 1-1 1H5m4 6 2 2 4-4m4-8v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18a1 1 0 0 1 1 1Z"/></svg> Export to Excel </a><button id="createDailyLogButton" class="flex items-center px-4 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-lg m-2 transition duration-300" type="button" data-drawer-target="drawer-create-dailylog-default" data-drawer-show="drawer-create-dailylog-default" aria-controls="drawer-create-dailylog-default" data-drawer-placement="right"><svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7 7V5"/></svg> Create a New</button></div></div><div class="flex flex-col"><div class="overflow-x-auto"><div class="inline-block min-w-full align-middle"><div class="overflow-hidden shadow rounded-lg"><table class="min-w-full divide-y divide-gray-200 table-fixed dark:divide-gray-600"><thead class="bg-gray-100 dark:bg-gray-700"><tr><th scope="col" class="p-4"><div class="flex items-center"><input id="checkbox-all" aria-describedby="checkbox-1" type="checkbox" class="w-4 h-4 border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600" onclick="toggleCheckboxes(this)"> <label for="checkbox-all" class="sr-only">Select All</label></div></th><th scope="col" class="p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400">Date</th><th scope="col" class="p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400">Living quantity</th><th scope="col" class="p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400">Deceased quantity</th><th scope="col" class="p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400">Sick quantity</th><th scope="col" class="p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"> {% for date, logs in grouped_logs %} {% for log in logs %} <tr class="hover:bg-gray-100 dark:hover:bg-gray-700"><td class="w-4 p-4"><div class="flex items-center"><input id="checkbox-{{ log.id }}" value="{{ log.id }}" type="checkbox" class="checkbox-item w-4 h-4 border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"> <label for="checkbox-{{ log.id }}" class="sr-only">checkbox</label></div></td><td class="p-4 text-sm font-normal text-gray-500 whitespace-nowrap dark:text-gray-400"> {{ log.log_date }} </td><td class="p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white"> {{ log.living_quantity }} </td><td class="p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white"> {{ log.deceased_quantity }} </td><td class="p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white"> {{ log.sick_quantity }} </td><td class="p-4 space-x-2 whitespace-nowrap"><button type="button" id="updateDailyLogButton-{{ log.id }}" data-drawer-target="drawer-update-dailylog-default{{ log.id }}" data-drawer-show="drawer-update-dailylog-default{{ log.id }}" aria-controls="drawer-update-dailylog-default{{ log.id }}" data-drawer-placement="right" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-primary-800 transition duration-300"><svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 012 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg> Update</button> <button type="button" id="deleteDailyLogButton-{{ log.id }}" data-drawer-target="drawer-delete-dailylog-default{{ log.id }}" data-drawer-show="drawer-delete-dailylog-default{{ log.id }}" aria-controls="drawer-delete-dailylog-default{{ log.id }}" data-drawer-placement="right" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-red-600 rounded-lg hover:bg-red-800 focus:ring-4 focus:ring-red-300 dark:focus:ring-red-900 transition duration-300"><svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Delete</button></td></tr><div id="drawer-bulk-delete" class="fixed top-0 right-0 z-40 w-full h-screen max-w-xs p-4 overflow-y-auto transition-transform translate-x-full bg-white dark:bg-gray-800 rounded-lg" tabindex="-1" aria-labelledby="drawer-label" aria-hidden="true"><h5 id="drawer-label" class="inline-flex items-center text-sm font-semibold text-gray-500 uppercase dark:text-gray-400">Delete Selected Items</h5><button type="button" id="close-drawer-bulk" aria-controls="drawer-bulk-delete" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white transition duration-300"><svg aria-hidden="true" class="w-5 h-5 text-gray-400 hover:text-gray-900 dark:hover:text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span class="sr-only">Close menu</span></button> <svg class="w-10 h-10 mt-8 mb-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="mb-6 text-lg text-gray-500 dark:text-gray-400">Are you sure you want to delete the selected daily logs?</h3><a id="bulk-delete" href="#" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-3 py-2.5 text-center mr-2 dark:focus:ring-red-900 transition duration-300">Yes, I'm sure</a> <a href="#" class="text-gray-900 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-primary-300 border border-gray-200 font-medium inline-flex items-center rounded-lg text-sm px-3 py-2.5 text-center dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-gray-700 transition duration-300">No, cancel</a></div><div id="drawer-delete-dailylog-default{{ log.id }}" class="fixed top-0 right-0 z-40 w-full h-screen max-w-xs p-4 overflow-y-auto transition-transform translate-x-full bg-white dark:bg-gray-800 rounded-lg" tabindex="-1" aria-labelledby="drawer-label" aria-hidden="true"><h5 id="drawer-label" class="inline-flex items-center text-sm font-semibold text-gray-500 uppercase dark:text-gray-400">Delete item</h5><button type="button" data-drawer-dismiss="drawer-delete-dailylog-default{{ log.id }}" aria-controls="drawer-delete-dailylog-default{{ log.id }}" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white transition duration-300"><svg aria-hidden="true" class="w-5 h-5 text-gray-400 hover:text-gray-900 dark:hover:text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span class="sr-only">Close menu</span></button> <svg class="w-10 h-10 mt-8 mb-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="mb-6 text-lg text-gray-500 dark:text-gray-400">Are you sure you want to delete this daily log?</h3><a href="{% url 'delete_daily_log' log.id %}" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-3 py-2.5 text-center mr-2 dark:focus:ring-red-900 transition duration-300">Yes, I'm sure</a> <a href="#" class="text-gray-900 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-primary-300 border border-gray-200 font-medium inline-flex items-center rounded-lg text-sm px-3 py-2.5 text-center dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-gray-700 transition duration-300">No, cancel</a></div><div id="drawer-update-dailylog-default{{ log.id }}" class="fixed top-0 right-0 z-40 w-full h-screen max-w-xs p-4 overflow-y-auto transition-transform translate-x-full bg-white dark:bg-gray-800 rounded-lg" tabindex="-1" aria-labelledby="drawer-label" aria-hidden="true"><h5 id="drawer-label" class="inline-flex items-center mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400">Update DailyLog</h5><button type="button" data-drawer-dismiss="drawer-update-dailylog-default{{ log.id }}" aria-controls="drawer-update-dailylog-default{{ log.id }}" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white transition duration-300"><svg aria-hidden="true" class="w-5 h-5 text-gray-400 hover:text-gray-900 dark:hover:text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span class="sr-only">Close menu</span></button><form method="post" enctype="multipart/form-data" action="{% url 'update_daily_log' log.id %}"> {% csrf_token %} <div class="space-y-4"><div><label for="log_date" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Log Date</label> <input type="date" name="log_date" id="log_date" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition duration-300" value="{{ log.log_date }}" required></div><div><label for="living_quantity" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Living Quantity</label> <input type="number" name="living_quantity" id="living_quantity" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition duration-300" value="{{ log.living_quantity }}" required></div><div><label for="deceased_quantity" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Deceased Quantity</label> <input type="number" name="deceased_quantity" id="deceased_quantity" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition duration-300" value="{{ log.deceased_quantity }}" required></div><div><label for="sick_quantity" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Sick Quantity</label> <input type="number" name="sick_quantity" id="sick_quantity" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition duration-300" value="{{ log.sick_quantity }}" required></div><div><label for="details" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Details</label> <textarea id="details" rows="4" name="details" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition duration-300" placeholder="Enter other information here">{{ log.details }}</textarea></div></div><div class="mt-4 flex justify-between"><button type="submit" class="w-full justify-center text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-primary-800 transition duration-300">Update</button> <a href="{% url 'update_daily_log' log.id %}" class="w-full justify-center text-red-600 inline-flex items-center hover:text-white border border-red-600 hover:bg-red-600 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900 transition duration-300">Delete</a></div></form></div> {% endfor %} {% endfor %} </tbody></table><div class="flex items-center justify-center space-x-4 mt-4"> {% if grouped_logs.has_previous %} <a href="?page={{ grouped_logs.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}" class="px-4 py-2 text-sm font-medium text-gray-900 bg-gray-200 rounded-lg hover:bg-gray-300 dark:text-white dark:bg-gray-700 dark:hover:bg-gray-600 transition duration-300">Previous </a> {% endif %} <span class="text-sm font-medium text-gray-900 dark:text-white">Page {{ grouped_logs.number }} of {{ grouped_logs.paginator.num_pages }} </span> {% if grouped_logs.paginator.num_pages > 10 %} <div class="flex space-x-2"> {% for page_num in grouped_logs.paginator.page_range|slice:":10" %} <a href="?page={{ page_num }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}" class="px-3 py-1 text-sm font-medium text-gray-900 bg-gray-200 rounded-lg hover:bg-gray-300 dark:text-white dark:bg-gray-700 dark:hover:bg-gray-600 transition duration-300"> {{ page_num }} </a> {% endfor %} </div> {% endif %} {% if grouped_logs.has_next %} <a href="?page={{ grouped_logs.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}" class="px-4 py-2 text-sm font-medium text-gray-900 bg-gray-200 rounded-lg hover:bg-gray-300 dark:text-white dark:bg-gray-700 dark:hover:bg-gray-600 transition duration-300">Next </a> {% endif %} </div></div></div></div></div><div id="drawer-create-dailylog-default" class="fixed top-0 right-0 z-40 w-full h-screen max-w-xs p-4 overflow-y-auto transition-transform translate-x-full bg-white dark:bg-gray-800 rounded-lg" tabindex="-1" aria-labelledby="drawer-label" aria-hidden="true"><h5 id="drawer-label" class="inline-flex items-center mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400">New DailyLog</h5><button type="button" {% if not form.errors %} data-drawer-dismiss="drawer-create-dailylog-default" {% endif %} aria-controls="drawer-create-dailylog-default" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white transition duration-300"><svg aria-hidden="true" class="w-5 h-5 text-gray-400 hover:text-gray-900 dark:hover:text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <span class="sr-only">Close menu</span></button><form method="POST" enctype="multipart/form-data"> {% csrf_token %} <div class="space-y-4"> {% if form.non_field_errors %} <div class="text-sm text-red-600 dark:text-red-400"> {% for error in form.non_field_errors %} <p>{{ error }}</p> {% endfor %} </div> {% endif %}  {% for field in form %} <div class="{% if field.errors %}border border-red-500{% endif %}"><label for="{{ field.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ field.label }}</label> {{ field }} {% if field.errors %} <div class="mt-1 text-sm text-red-600 dark:text-red-400"> {% for error in field.errors %} <p>{{ error }}</p> {% endfor %} </div> {% endif %} </div> {% endfor %} <div class="mt-4 flex justify-between"><button type="submit" class="text-white w-full justify-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-primary-800 transition duration-300">Add DailyLog</button> <button type="button" {% if not form.errors %} data-drawer-dismiss="drawer-create-dailylog-default" {% endif %} aria-controls="drawer-create-dailylog-default" class="inline-flex w-full justify-center text-gray-500 items-center bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 transition duration-300"><svg aria-hidden="true" class="w-5 h-5 -ml-1 sm:mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Cancel</button></div></div></form></div></main></section></div></div> {% endblock content %} {% block extra_js %} <script>function toggleCheckboxes(e){document.querySelectorAll(".checkbox-item").forEach((t=>{t.checked=e.checked}))}function getCheckedIds(){const e=document.querySelectorAll(".checkbox-item:checked");return Array.from(e).map((e=>e.value))}document.getElementById("bulk-delete").addEventListener("click",(function(){const e=getCheckedIds();if(0===e.length)return;const t=document.querySelector("[name=csrfmiddlewaretoken]").value;fetch("{% url 'bulk_delete_daily_logs' %}",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify({dailylog_ids:e,action:"delete"})}).then((e=>e.json())).then((e=>{"success"===e.status&&location.reload()})).catch((e=>{console.error("Erreur:",e),alert("Une erreur est survenue lors de la suppression des batches.")}))}))</script> {% endblock extra_js %}